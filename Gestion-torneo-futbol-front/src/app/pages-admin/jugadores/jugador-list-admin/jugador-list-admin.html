<button (click)="goBack()" class="btn-volver">&larr; {{ 'admin.botones.volver' | transloco }}</button>

<div class="admin-container" data-aos="fade-up">

  <h2 class="titulo-pagina-principal">{{ equipoNombre }}</h2>
  <hr class="section-divider">

  <h3 class_ ="subtitulo-seccion">{{ 'admin.equipoPanel.tituloDt' | transloco }}</h3>
  <ul>
    @if (dt) {
      <li class="fila-clickeable">
        <div class="item-info card-foto">
          <img [src]="dt?.foto ? dt?.foto : 'assets/icons/persona.png'"
               (click)="abrirImagen(dt?.foto || 'assets/icons/persona.png'); $event.stopPropagation()"  
               [alt]="dt.nombre" class="item-logo item-foto-jugador">
          <span class="item-nombre">{{dt.nombre}}</span>
        </div>
        <div class="action-buttons">
          <button class="btn-detalles"
                  [routerLink]="['/dt-detalles-admin/', dt.id]" 
                  (click)="$event.stopPropagation()">
            {{ 'admin.botones.detalles' | transloco }}
          </button>
        </div>
      </li>
    } @else {
      <p class="empty-list">{{ 'admin.equipoPanel.dtEmpty' | transloco }}</p>
      <div class="agregar-container">
        <button class="btn-agregar" 
                [routerLink]="['/dt-formulario-admin']"
                [queryParams]="{ equipoID: equipoId }"> {{ 'admin.equipoPanel.asignarDt' | transloco }}
        </button>
      </div>
    }
  </ul>

  <hr class="section-divider">

  <h3 class_ ="subtitulo-seccion">{{ 'admin.equipoPanel.tituloJugadores' | transloco }}</h3>
  <ul>
    @for (jugador of jugadores; track jugador.id) {
      <li class="fila-clickeable">
        <div class="item-info card-foto">
          <img [src]="jugador?.foto ? jugador?.foto : 'assets/icons/persona.png'" 
               (click)="abrirImagen(jugador?.foto || 'assets/icons/persona.png'); $event.stopPropagation()"
               [alt]="jugador.nombre" 
               class="item-logo item-foto-jugador">
          <span class="item-nombre">{{jugador.nombre}}</span>
        </div>
        <div class="action-buttons">
          <button class="btn-detalles"
                  [routerLink]="['/jugador-detalles-admin/', jugador.id]" 
                  (click)="$event.stopPropagation()">
            {{ 'admin.botones.detalles' | transloco }}
          </button>
        </div>
      </li>
    } @empty {
      <p class="empty-list">{{ 'admin.equipoPanel.jugadoresEmpty' | transloco }}</p>
    }
  </ul>

<div class="agregar-container">
  <button class="btn-agregar" 
          [routerLink]="['/jugador-formulario-admin']"
          [queryParams]="{ equipoID: equipoId }"> {{ 'admin.equipoPanel.agregarJugador' | transloco }}
  </button>
</div>

  <hr class="section-divider">

  <h3 class_ ="subtitulo-seccion">{{ 'admin.equipoPanel.tituloFixture' | transloco }}</h3>
  <div class="fixture-list-wrapper">
    <ul class="fixture-list">
      @for (fixture of fixtures; track fixture.id) {
        <li class="fixture-item card-foto" 
            [routerLink]="['/fixture-detalles-admin/', fixture.id]"
            [queryParams]="{ equipoID: equipoId }"> <img [src]="getEscudo(fixture.equipoLocalID)"
               (click)="abrirImagen(getEscudo(fixture.equipoLocalID) || 'assets/icons/icono.png'); $event.stopPropagation()"
               [alt]="fixture.equipoLocalID">
          
          <div class="fixture-marcador">
            <span class="fixture-goles">{{ fixture.golesEquipo1 }}</span>
            <span class="fixture-estado">{{ fixture.estadoPartido }}</span>
            <span class="fixture-goles">{{ fixture.golesEquipo2 }}</span>
          </div>

          <img [src]="getEscudo(fixture.equipoVisitaID)"
               (click)="abrirImagen(getEscudo(fixture.equipoVisitaID) || 'assets/icons/icono.png'); $event.stopPropagation()"
               [alt]="fixture.equipoVisitaID">
        </li>
      } @empty {
        <p class="empty-list">{{ 'admin.equipoPanel.fixtureEmpty' | transloco }}</p>
      }
    </ul>
  </div>
</div>